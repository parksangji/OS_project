# OS_project

------
## Deadlock Problem

프로세스간 공유자원을 사용하는 과정에서 발생할 수 있는 죽어있는 잠김상태를 말한다. 프로세스 A가 자원 1을 사용중이며, 자원 2를 필요로 할 때, 이 자원 2는 다른 프로세스 B에 의해 사용중이며, 반대로 프로세스 B는 프로세스A가 사용중인 자원1을 필요로 할때 두  프로세스가 대기상태로 접어들고, 서로 잡고 있는 자원을 놓아주기만을 기다리는 상황을 교착상태(DeadLock)이라 한다.

## DeadLock Characterization

다음 4가지의 조건을 모두 만족하는 경우 데드락이 발생한다.

1. Mutual exclusion(상호배제) : 특정 자원은 특정 시점에 오직 하나의 프로세스만 사용 가능하다.
2. No Preemption(비선점) : 자원은 먼저 확보한 프로세스가 해제를 해주어야만 다른 프로세스에 의해 사용이 가능하다.
3. Hold and wait(보유 및 대기) : 프로세스에 의해 할당된 자원이 사용가능한 상태가 되기만 기다리는 프로세스가 반드시 하나 이상 존재한다. 
4. Circular wait(원형 대기) : 프로세스간 서로가 서로에게 사용중인 자언을 요구하는 원형대기 상태가 존재한다.

## Methods for Handling Deadlocks

+ Deadlock Prevention

데드락이 발생하는 4가지의 조건 중에 하나 이상을 일어나지 않게 막는 방법.

  + Mutual Exclusion(상호배제) : 자원을 공유할 수 있게 만들자 ( 자원을 공유할 수 있는지 없는지 권한은 물리적으로 불가능)-> 자원에대한 공유를 할 수 있게 해서 데드락을 피하는 방법은 불가능하다.
  + Hold and wait(보유 및 대기) : 자원을 확보한 상태가 아니면 자원을 원천적으로 보유할 수 없게 만든다. (all hold or nothing hold) 하지만 starvation 문제 발생 가능성이 존재.
  + No Preemption(비선점) : 자원을 확보할 수 없어서 대기 상태인 프로세스가 다른 자원을 갖고 있는데 또 다른 프로세스가 해당 프로세스의 자원이 필요할 때 강제로 프로세스의 자원을 선점하는 방식. (보유 및 대기는 허락하지만 선점방식으로 설정한다.)
  + Circular Wait(원형 대기) : 자원 확보 순서를 미리 설정한다. 프로세스 자신이 당장 필요한 자원이 있더라도 그보다 순위가 높은 자원을 먼저 확보한 후 필요한 자원을 요청한다. 자원의 활용률을 좀 더 올릴 수 있다는 장점이 있다.

+ Deadlock Avoidance

시스템의 프로세스들이 요청하는 모든 자원을 데드락을 발생시키지 않으면서 차례로 모두에게 할당해 줄 수 있다면 안정상태(safe state)에 있다. 그리고 특정한 순서로 프로세스들에게 자원을 할당, 실행 및 종료 등의 작업을 할 때 데드락이 발생하지 않는 순서를 찾을 수 있다면, 그것을 안전 순서(safe sequence)라고 한다. 반면 불안정 상태는 안정 상태가 아닌 상황을 말하며, 데드락 발생 가능성이 있는 상황이며, 교착 상태는 불안정 상태일 때 발생할 수 있다. 회피 알고리즘은 자원을 할당한 후에도 시스템이 항상 안정 상태에 있을 수 있도록 할당을 허용하자는 것이 기본 특징이다.

ex ) single instance of a resource type

![image](https://user-images.githubusercontent.com/59435705/120584537-22d71d80-c46b-11eb-9cb4-f505b3e9b39f.png)

![image](https://user-images.githubusercontent.com/59435705/120584943-d3ddb800-c46b-11eb-9af3-20fffc723897.png)
 

은행원 알고리즘(Banker`s Algorithm) - multiple instances of a resource type


+ DeadLock Detection & Recovery

먼저 시스템이 데드락 예방이나 회피법을 사용하지 않았을 때,데드락이 발생할 수 있으니 회복하기 위해 데드락을 탐지하고, 회복하는 알고리즘을 사용한다.

  + 탐지 기법 : 시스템에 데드락이 밸생했는지 여부를 탐색한다. 은행원 알고리즘에서 했던 방식과 유사하게 현재 시스템의 자원 할당 상태를 가지고 파악한다. 이 외에도 자원 할당 그래프를 통해 탐지하는 방법이 있다.
  + 
